<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="pragma" content="no-cache">
    <title>Xavier Rivera-Lanza</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; }
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #f0f0f0;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .lock-page {
            text-align: center;
            width: 340px;
        }
        .lock-name {
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: -0.01em;
            margin-bottom: 48px;
        }
        .lock-card {
            background: #fff;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 40px 32px;
        }
        .lock-label {
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: #999;
            margin-bottom: 20px;
        }
        .lock-input-wrap {
            position: relative;
            margin-bottom: 16px;
        }
        .lock-input-wrap input[type="password"],
        .lock-input-wrap input[type="text"] {
            width: 100%;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            padding: 12px 40px 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f8f8f8;
            color: #1a1a1a;
            outline: none;
            transition: border-color 0.15s;
        }
        .lock-input-wrap input:focus {
            border-color: #999;
        }
        .staticrypt-toggle-password-visibility {
            cursor: pointer;
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            opacity: 0.3;
        }
        .lock-button {
            width: 100%;
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            font-weight: 500;
            color: #1a1a1a;
            background: transparent;
            border: 1px solid #1a1a1a;
            border-radius: 24px;
            padding: 10px 0;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .lock-button:hover {
            background: #1a1a1a;
            color: #fff;
        }
        .hidden { display: none !important; }
        .staticrypt-spinner-container {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .staticrypt-spinner {
            width: 2rem;
            height: 2rem;
            border: 2px solid #e0e0e0;
            border-top-color: #999;
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="staticrypt_loading" class="staticrypt-spinner-container">
        <div class="staticrypt-spinner"></div>
    </div>

    <div id="staticrypt_content" class="lock-page hidden">
        <div class="lock-name">Xavier Rivera-Lanza</div>
        <div class="lock-card">
            <div class="lock-label">Password Required</div>
            <form id="staticrypt-form" action="#" method="post">
                <div class="lock-input-wrap">
                    <input id="staticrypt-password" type="password" name="password" placeholder="Enter password" autofocus>
                    <img class="staticrypt-toggle-password-visibility" alt="Show password" title="Show password"
                        src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==">
                </div>
                <input id="staticrypt-remember" type="checkbox" name="remember" class="hidden" checked>
                <input type="submit" class="lock-button" value="Unlock">
            </form>
        </div>
    </div>

    <script>
        const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
        const templateError = "Wrong password.",
            templateToggleAltShow = "Show password",
            templateToggleAltHide = "Hide password",
            isRememberEnabled = true,
            staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f6d3d4534752a34d2678affbd1499e763656a9c6b18c3147373a6728185de2fcb0af38c2db4c4648b5f1da6be9e1d079806d0854ede5497b8cafff98d79043df15d729ee033f668f89c0751d8d7e6e3291a32f3feb46fcea33b12a4ec998249fe314426c28f3c191d8e9bf76683381948f523ff94cd1ddd1ae343141e5a4ce61a058fe319d8e2090a8220f305be2f4ccc9efcad8a0cc62d107c6604a48b872ab54f10ac1ec3372979bcaa8bfb853f02b810a00a6d19948e94ad2f9c4372b19c6292c1385cec80b2c3f58b69b32651d57c78a8bee44b68e72887e0bd381638bee3562396b78360ed311df37e3267b69f173fea7e14e47ecf1ba46b36a54265e653f467bd8c8604db1b328061e3f06aa6b89882723a7f9e43c284feb687ce044ba9ed2bcb1cc022f87b09f05b5c1d3f22e70fd402eed6a2fd00317af903430aee213b0d8530846f2ffaf452929244521b9e7543c552be55f64bbbdaebcf89bd0f058f236b1730fd74266b0aee6532bbbdce41dc809f83e80696fd8bae911e4a0632ceaeeec371d086791852611097e4980587679a43371f1c5af03676a999766a5c1cf12a4c692d4a4b27adfa35977125792ab2e2ea6a86b8166e0cdc43e5ffdeeb092f70b02fa38fed78876aa90f655c5db9bbab7787bff66a898cf47e6774b2a05db55fd122c763d6bcdc446233b92358a5d61a7c7b1ce0f31a87afb8c151dde55c871a91509f44856a01ef19fd220ea618da3f4d1ff938c001d2bff01f6359b33e1baccc6e4e2ac1118a7083c4ec4ef542f094eb673004184dbcd633383f17165949f17add04b5546aa845e40718db1e0acb69ed46d8d405079de34d9b14052317f408be06fa2d7e6f270c2982f0f9bd83cddfac85f9464c2f03638ab5c5bb283f5caabf9b9b98e0f77315e87029e7202ffeb79b482568cb9cbaadeeab6cc6226946b53d103bce34ee04d44d45f15d37dcfa392a634080fd90878a279c508ba77fe3f8a7a4e98de9395153ddfc1458057afa40c5f5a2cde70d692731197f423c61c4c595720bb9ae033d89e514cd48cb5dcb6318273071399e762e8a6c7e90a2fdde00b9c5c6633b3df1343e5ecaffcba7d1ed314f7cf9cbaa62f94f8cd7d7f0abf1cfece99f1bf51e1bc8448ef6ce79ba91e56d9842273dc5b1aca75b4c7654c7fa49a65d9b293d66cddbf694d47db14d62193d70d4da043f9b9ec41e8b7f750214753630b419f0bd7e6981ce5dbeb1797a1ced7f7c71d0026de147421cb7b956170954c19d687774106b0a14b435857fe396deeec925caecff8952ddd9972b7925dea5c4a4456f67ed31e179185bc5f2837467fa5ae6dc716232fa01f13d4c467d81e5af04d6b4fb5b1737aa5e398ff289b230ebd4a602aaf15af0bc79cc61976e4ee0d0ab0fff1463cbfa9f0b983da44041ce776ad85385e86e18a26fdb2150da4e572a61818c1ecbdc853bcc418d918747046cd928aeec42a58de267647e44a1600d9fc915bf4a2249472527875b3a7120a6960e217ec09edd2e3d8624d5fb9b35206757bdc087a6419581d0bc35fbbdd1f28daf9d5dbcd290d27bbb7b77cd7865377a3c1ad9403c3481bb2121b950836841d1e69e3ad5a8617508d9f0c41e2eee54060185c3f75c6c7229cfb07312279b7d71dd415b21fc70b0ce2a2f465ef1053360b00918f37be02e7e4856e3d380549c2f21781eb212975757f707482b96641db3a81a0f4e72b952ca8a0a09db86c7831eb21c912d12aa0aec626293d57360cd32db02dad1dc4dc7a84c6666a4c276d1b56ab26989496db26df45649fe182a815ec2a96889adefdd5e592d58da25393f4ac8b686ad91d60f349f51d85a7e4ce71d75fa1f753fd5a1f91adb8d6372ba502b7cac6ada9e2fc8bca11560b6ac8c15e7394c91f1fb930c297b5287cd06b8ca5513e3a0784fef95f03c562e721fa96c2397d7872de49d619921c67e0369ecf28fa55a634d12ff622b5083a81d2038cabae72b37c0aaade1a5f55094f9ae6856bac3c8ec2f9a1f4f0e9af95c197490d625609b4506bb59a961402f48c18b1769e1bfbf9572e2c8c61a49c5461228112eb1e880c8e7b0590342275a7b54f0b1189cc6b035e33b1b9dcff614f9b4b108223d4e58fff8a9e597b1cb289cf2b1f490c1a621ee5486f82d874ace4932350725ee00f95e1d34b360046373f8c778725f5552b39f70248c70f5eda88a0414fb4a579dd3e963bb2adbfc14d5a864aaba0604a42ee48b707daf33dc4388b95ba4a24fefeef706e50babb7141e4cdc74b2696c6d94d7d0884d287186ed2728ba2f69a098bb0a0b32caa15a36669cac35815dcfbea21b368006437897b2406544271642520fe89d3371833fd568ed746f2a1b2cdec60287155b6cfc79b9b1083ca4a2629e032af5487d532094955fc8de32ea0fca89263d811f5d3c6d9054bae9bfc41b7eb66fd0b7d43104ab2823a6192b5bf73b5841a786efa27a22cfb0b7106e920dae345274f3d2093f7011bba4a3a62acb06d9414937151784a7c5abb50e95e590386e094d17cd846cc608a145d6c6abcdfacc5abff9d97fd6e2caacf8c4d10eb9efaf44d582f74c3f8ee31aa8678fafb44288c384e5660fce9c41c891a3c791c2cff8dd3099e8e2a68dfdb8ad30f5b1950ce7d5fb23f949899f806717de17c117cc10e1472748fa485e13ecaf6f47980237b0ac62e68bdd5e4cca21f35518d97d5f5ccd28c61f4447eb07f288af66c9f2e3b4e46e16990b9ff213b95f846c3215cb82c0843b01de2f1bb33b0b1c74336db738df8743713435ce309e8a153aa89735bce1e7543ee9557ea7b9b96d81b9bda3da733ddac9a449380286f56389099635f41a1a22920380d3fd1824dfebc3881c2d1b5fcdc2b92794c553356dead66cc79e4e0b809b06a1dc22ccdeceefd01e6f022a8c6015f37b48ae87fdefe06f020152b2b8bc98823f0c328e56fd7dd3205d9609c1a511b01744721fe30ab58f6542f5bc708c6e657abf4c470b4fc75f05625ed6cc50c9aabea39810a4100725d76b13d136b2f7c423917cf6ad9d2f9c755f94e09db1e0dfaa89c8112a78da21239894c31b8d0ef87c46dd725f3ada1365a60ba4a5ddaa0182d105b885fb42372954344cf4b27b1cea26da2b66a652a59efff651967fef3e38a72df51e5a8c1345730f04ae9c1038fc272a649dde5ee6135a7d2a4ce4e22c8d4ac50f86a0371bfc07e41c457d65cce887ab56b8dcdc8d8bc215500cbb38c19720264fdcc2e57494de898e062aa0873290e9daa86d5c1003cd16df1e26f067a92e7eb0d2d8d79bb86d99d5b5ed505fcaf67813d86a6b2ca73fad9d9056aad894482ab065e7646bb857281f51cfa9b91fe8f8044a6d7ca243e39d265449dda55ed149c70e46641ec2e1681ae7913cc0fe0080d69a651f61c87ed3de7e6948722e3867432e007452823edbcb5e3d28515f87c7abad80b85fe9fb979a36a74db728b09c7ab950182358712a9551554494b98120900a4743ac772191f2c798565305a165dce037b474d181e2aba6465790d634b8a43164e8a05b6cf6e25712df85bafae089a71656280aded0d724cea3db7102864e30c281366a5dadecd69bde2e46a296ca7b947b8ce6ea3ceb324e1696213740a25cb30991208f036a7c294b9948fe9286cbf63ffba5b88cafc6db833b6aadbedab2eb9ed28fef164cad9324f768e04df8b69a1b4e4b52739d27f81207cfbf84f8881652b99be34e89d09106d771edb651733d00bbbc90b1127ffcaa7c5015280fe247768c93ff1c20ace708a3a37b05c5effc6e7bc12b4e5ec6f1d1a6bed62868dd4fb70d2b73609ee26de1002fcf25919a0b65230e9dcab41ea86a6a3d880c2744214b6f36fc054c9d53b030fa3fccf030571a09c41e531f47e03e4bde78b9c82dc1db44d865cab177e78424b16573e9c31127138d2b6df2fb44405812ad91c3c1504461c6b4099b9d54960ce253c08f0ead21717bf7c1c81de897763615aa75afd7d20bc617c719ae5d2a8a74497f43f5e5b2a0f0c0c6b3ba9cc139f8fc492d7841c208e8eb18b631e98a8759c9939f5827f1b59465cc77888920a14a8be0743e90b67784c49b7f01edbe69390515f3dc0a1d5f034d54a644fdf55ece6e6b0d210eb7de43e284b4f776a8a8a6fe4a803f6bc706a3e775e136eb1bc747dd6c2f7e6031de911a2e1eb7b398dfc954d3d5a18559d8adc9cfb147507dc4bc6aea2aae2c76632250126ab67948a94ed406f96e1d5929260d6522ec3ec8f054b3e6e3afac91d28baa2a70b49742b0f1e69854fcd54238464f1a46d6269be10c3ee396aab1fd55d738d7f7a28a781081fcdae5cab27cf3c3c61ee6dc3f15462ab5f1998ffe62201d1c95bfee24def3149b66af96b88c88d347cda50161e98bb269be8841f3f58f7230b4dc71d08b88664359af589b76b72b188d730528e4339e7c41251133771eeddbd9a2c078968d25e42cdb99d8d3b05da506127a32418de60e66e5494b56a445a02d5f93290b7035d93787b5733f3e1fbbfe27c8993892c4f65695b2a3942ac77230eb33e6df25b1386cdb29aa43029dd20662a9e093ce4c663a2890d389f3076dce8132ad54af92d8976dc71a3663c25622c1c5f2e6a59a586f0002a07b4ccbec4623323733980371c5cd18f43c392ad0b32cb1690f0494644de04250f6f4491c83891988ca4e4b624e2d679b439279ce33bb5bcb3626c5c300b1b7c680348d0e9d04eb122bb5e23449bdf585f8784d2e23625fef020a84f1487a824e82eb197430d8b23f843c0c5da81b7c6de2068a3381683e94817ccd3a2091b95b54f28e4e7c48a7a362dc7472e6807d95dfe5324f868745b744ad30e283620904ff3dd84eabbeea9880d8c213fb35780bbfaa8188e7eeb28b0a41de7b9c6ed78656a67ad490ea9dce01a08ff2ef24ecd4f7f3998ca326582546302606706105ef8ae656519a02c23b321a06da3ec516c61f46aa8872cb5964620f29f5a53c0bad6043b91fa83c6ca24ef796a35c137ddac6813891cd954b5a72acad1fb4244977e652f989c815f77c4fa5b6ff0eb49094c5b178e4e0af6c3f2e3b3bf9aea333c7f545243f37a952348fc5aedc3f8e7ea1c218f805f2fdad25d650c9b3c0b85e2543ee832be6e9eba10c865c6fd1d5ca869ee7d27ed961798408760cc7d99efcdcd3263016a607c77eb352e0596f5431f8f3fc985aba92b17a5af118c50a10270448f2d6744f7f635040732c9bbd2dd6828aeb0a5bb64ee40e15913bc67ab2519fb2efea4088791beedd236348018894ba01b380b2ed6a8b621fc819c5d3b7a2d33a1f17e3a8cade4e6471695d29750b68035bfac866e4ccd579ec1cc84500320d2057836dc097b83e30353b2d849879569acf02a3180cf5bbd43534a4d78c763e3fe8572535d0215019f08fa0cbba79bf63d3a9f5d121b7c1aac20efc887712cb7d1d55313fc0c841674be38b7b10af33233be201ba7273718e0e11a5d80b654ec9ac1a01b6432c76ab75f902e6640cd22eb68d24c60f4ae779f0d8d8ac40996e974d8d69807bbf6ddd5dbde8525e9d7757239f57d7cfad63273267e898badb24483047260ea0a114cd4fdd5891e3c5aba5cc1c2aacd3eb4c7bc7aba9d4f0bc2df879ea3a245cebf66cebce2e99f04e4e161c4133d8a56be135d49bee154dcd434cbfc91ecbb6ceb76751ebf68beebb2ca92f03dd0bd1090d7f096ad1e6a51bf1404322cec7eb49d3f95bcf6f675a568074d771b0e2ffbbd55f1e9b86b7bd0509a4da071e9a4dd0bceed97ed224226e1424398ca3633268065d8f0127aeb41a34c69d7823b761b4400663098f493b414fdaf86ca728e5871bf72af57107abed75528cba6db7c84bc5f16d7d573e253972120742cc0dcdcdfb2396c757fa843aaeb09d0a2c38c734c9a693707d2f0db36bbddaabe09bb138b0d93d0fb8a55ecd704b3d7afcef8b49ab89ecbb3c64365c68ad4c8903872223bb56d9416ceee97f2f6a62b2fac13253605187092f72c20b41bb801b7c791cf525fa7c228d775cd28a6976b1c9681fa80488428d9be9920a557ac0f6e10b8c274fb83cb0b9d45ac2221636442bd7968e6088bed63f7d260583c986c696b5f528c8def3499485c4cf30fcd65ff2f0aeb8e9dcfc682499b86721c5a8628096010aea76cfea07f32b809209c4766d467d17fa0581ae3e369da98fef9882858edc6d9a66c7ac2fed86d96fc1708d7ee3685368c65ad1ea9cfc6bc50fac7c909e2f3cccecb3afa204077807a90005ec09ee3cb28eb6bb754c598ee1c8a1e9be1b52e9241420d82ea5acdae193379cf12c2ebf5a4901f90576b4d8806708d1c8c9c2ca2d12aa13210159f30cd0040580f5f01644c4816f52de450104badcb04f3a2801bf3bee66c6e80ceaf8345f971f6b2affcb4973c31127641d784607c93ecab4f40dd37aecec56737ed5917f619bcce6ebc9fab46788df5675e5dedac2b325175dc9ecb9426431f061c2e4d07e7c3cfb51a6187163b44a8cecbd7faa9cbeb7da70e0f77719fbf32d119be3b7a216d011bc8670d454d5834ff9112eeca5f7a43290681e9c5cd896c00dbfc129cad53d8c50f1755efad0f53b125ee81cc7d91073093cb6e86516c5e052cbf6619611e4a7f4b50c5b26c0fb17b828834d23f4fb8d853dadecdabbf61889ad767beb5b9ba71a655200003fba6b19a05fa0c67729a3c759f78111f0e2bc344d39dccddfbdf280fd88c9870a3ec638c296976dc03391eddfa21ecf37935cf257e413661a40f30f637513ffd665b4b62b6f77532a7eb3ed01d11e991f5ea5b5114c32259d00558517e7c974d514c804c6a3f62892d47e66a368fc588903cf2f1702ff31e0d3be644055419a821dc0f825a01e1d897a788ee92077f1e6712956b0b6bba51c64480cf71416058fdea77a12d7b12ce3a77b7257201f705bc31d76f233aa25f484371e12b118d001fc61ccf16a2bc530b374f3f1d9353fb1ca5dd651ab3123832cebbcd6e0f3affc78f30d911dadbff77c3ce7746d9edf205831b45a283a006aac60d0e85ca0838aed78f36b4288ed1351b02b8c2f808a15218c785dad591bcc0903eca79559ef4998a6316d846f0122cfa44d0712567ce9cca3f1f97fae7e9b7f629821509bfbbde8ea3e2e639c19c2e080e569b3dc7a0d1cee8ef2ffafb236c1c652a57bb42bdc5bf014a044157cc77b0113f2fd7949632e6ada5a53cb7f4f5c82450c51cac26c98255799142b129062c0ca7287e3898dfde440f1b2aab5f8f7f565155de7d3248524d555b592fcf4d15386b76ed177edbea1c01dcef2e8d458d9b50b6714d46a4f8d3324ec82c2d20ce1bae9dcfe56c2d83d8969ad8bad23c5cee02f9aa9cf4c82d5f28e8ffdc5f93157a71f1622f21d5b762210d4e1e853b85f96af8a5615004680719dd2517f27bb44a585f7be304890246e23b7a696e274437b66920e15bdd202337dfdabbd27b5da7e39d76f3b98740c9a01f2cd8193d99ad9dc9a142b0ad7197860f43132f6f4dc9bb5bc60987260408044d6df296b5585aaae4ef483930f0960805404b496da8bee5beaa021ca26e6bd1ff99f536907c864cf189253cceb1063c1e8021a48ceaa5a674be8521c678c9f78847f876e85d235ee2278c2a086568e024e2db45e41954953875e2ec756f66d5521ae45c044ae3b7f75957069ab30266e105de75b983e8da53ed41308b4b2286a964fa168981c7d89fd93598af771df43ade754ab511f5182929e5725feecdbe4b770973210391d590b7c732fe00e7d82cc1f83bacc551625eacc39e57217c4fa36b5a4df0204088a83fd2624fe5d8c3178ae4131bf786eb5b4f9b4920b500b1a23627ac526959bd46fe62d485ccc7767068accbadd764cf77db31860beb99342aa760e1018680b63f0eb9006f2bb8f37eb2bc4ba6b7eae4921f7629960f6e671ade0290c48629efd3bd843775be6d54c94d59767d12fe49f801d5910d5fd3f6fe1309e7fe747b593600ba4ab9f1548f1d2943720126b3288fb7b1d419616e5c2bbbb45051c778ea3e9e72a4dec29d8b5283d8295fee5c6d67f044e5552c2a835a88466288409d310279e83691264bb46aea839baa7d631fdfd7dffb7aa4e277760755a039fba5a9d1963901ffa863ccd31261b5711cc550161f4549017ad5503d8584627d1d3825c0d644c3867bfea542b9731c4bfca1ea60ff1664edb6aa0776d0d0fe11f843c5a3e8707d995f9ff00ca1c0636d0cf4881f04951dac184d863d1929baa4d825c42a143da0dca65af992759e2f1dc7a65e3f0ca623a3b5f85f90ac582dea3d9c29ffeea651476031d1b7ccf4b1009370e5c1d5723dfde3e942e5b3728a6890aac68b6fd1ff14945d00d1cc9ac40f025c7bc6ca0a5a030aa43215204667104fa71cb92adbab4558b474e4a75fb8e5ab941f6f8b2df283487341e8e3a51acd0f4aa19e2751436d8fb5bce8c0741bb586b969388e6b76f4451418a72d253faee565a2a84f6ed183ee30b4abfa71f749c898350b9b6a69911f1651b9ffa5b1645437c9afd8487ff8f237ede87f27d5b86ee5c8d5be01ac94894ab6fa05a132c361ddc6a3a30e1e678ee3c5219899907959e8b4a6efa57f5e3b1e51cfc7c9f8351cc18a56c20f37274152bf28f7d5cfcb8281f1b9baf9d990dd9de95f29f5ebef32941db03bf69607c48ee36774fbf4794a31370e53ec304d64b61b70c7e1ca2bc4e7591e398fd77abdfd7ad831b7e43f4ec295ba2533b9ec1126d632f7f970e565d3b29b1ecb330a809967c6454400cd247d564738bf9bcef7308f9bf88ef583259789f2c8359cd1a239b8be96631f0b46b777743236e85e7332ef63f46cf4448095bee482811ff879873834a4f0f013b55a636319d63614cd0c81346fb29d9c094aa11c064ab281204f382725b287c3f99dd48408db6e9a9cc6f305c965e58a74acaee609fea8bd4ac46aa4e14dcb5ee1d392e851b47f7ec52cc102fd08a564f994f1beee31425a83de2ee7196c1585aaa195dbf0f973eba663ba8fd5e760d225275d8ad8d198df14e25406f3a8af359658859991819573e6a535961b16372bf53baeaf2c0e92317d254269ae6d268896fb74d917cac483100ca6c82a9948b2c3e9e2fdb58a8fc845d1bd3df89b2633fdbb42a9c764b63bc49ecb19ad8cffaf86dde98c33d583f28c21bae2648110c7a77d08cf0a3a2c5bba8dda2eea06ddb12d6efb79072f5b8730ce635ed8c7d479b5e896a2cc49381ccc47904a005dd94b932108be9b3e11d0b75389e6a1e590d1ff04e2db575e21b1bb3063b88410eba6d0fd6f064225ade8316c8c697e9d19c1bde948390a53cb40f9086927d10084b97e4da7a1456b6d48bb163426eda88530cef1eafbce39c3647f25e12eb9d8185f0be3799f0d0d3f303b341bd862ec493e5c79614489332eaaf4a4da12b36d1e8f4cbebf36afe7212847a40a9a42c7f74174896a9995b159f7caf860af8ca6ccdf5c3551cfb3fc2949e1a475719264a5b2c936d3f939ca68c622aa2da9e3a62aed72605b67de312ccce3ebba676cc9ae84e1f8804f2decd84a5c1c3e996f7fbf8b2840278758abf04fcce71d8494c065e51eaefe3fd553b00a43f7d2ddd8214144c55b0cbc886669b2e977188b24194d9106335d5d91ff9f8b48fd0ddca3f1c410a934092de0873892b92fd69f4875b516717adf4fdcc6bc817c0f4695265fb8b030188083724de089f614c30dace8521f64c08602d8dc2432da99725653b18b58a1e4cdaec75e409f2289360bebfd92c24096e5d661b9d4c28b71539af2e7d8a10623d67f14ad547fd93890ca8ea85e0618d537365d442fca88b86a1f855c5a38ea938d840651d2bc2f83d5e2132807a2b56e4bc904d2775f9c766353135ef3132660be290912805afbc4310393b8ac6e842fec18d363d6e83db4e4440fa1bbe44fdb9e49392f4b44bfb77be079868648c3a4f97bdc3be8cca84141dc827816d204286e17eacd3f678da3d55ee700660d431f1fced76f98b2827d22dde28545f23e1c38b8fd986e2ad4b4bfe1a6e87948f42a6765fd2dc699c2d8859af4f03c6d7ba69f715da7d3ff53bb8169cd35117030137588694968b71af9ddfa482af03ddb0a5bea759fcae6373d84bc0af45d3a931f30cfb156f696567c98f3c6c932887f207d6ed97d1ebb43f5c613f164b5c12cc0859f72876e3720154f4c0d859c34d5b7767388e9ad6cf8736ce4b5757a996cc2a5fa6594fec5c6bdb334d2e0c94d6f421f41c87ece3ae1ae655b89ce07e36f67497ded1da0a1a863e4aeaaf643709a478eec4b439ff5332b3d29406eeec29e2926e19670549fbf6544d7e2f6b9b2553460d61e77798380e86b3d1e561b91ff82bf3ce92d23088102b10a0bfa9d04e84a4a63cf24c3a9e740f88f3de840bc15c55b30e8ada182eac33f70b90d21e4f0f0d4ecec99d3d1e47b538140d3bcff75da39f9124fee0a26c08131345239f2c3df4be108dadbe57fd76d25e6c0710b9feb0ae472c46ebba1f685f506322d5c2aa25512d58998085fc601f8e72333d2121737d642daba12f11d487cef8c60c691dd61b6f06c78edeb65f28a7b995c84566c557c14dc894bab63a557a20c36f52d7c57c3b9693dcda8ae5bb1a19ec1596502ec578de22248654793a0a0e972c61ea495114468272510052750b37b0033c42358a17671495407ee103da8e56d910d77ee7ab059027fce079d4ae8c02daed02315c9cb5f09a54846464d6d6fb8043a5b4320f484886849bed40b6288b6e86d3ca0d1f79c42e824db7b9e75c080f1f12f7d92271a4ecfa4f9c95627a3532e003577f8bc9714f4b1185338f2cd7f7c9640c80025e0b2972f0f11d0f787cfc88b3f533d79c665302ef27e77af92f3f9c0554e80634b4b400781886a74290e7a4315b9f6ce1155e9a9bbc5304de588b530879672c006a8cf4300f8bfdc2e2929e8b302bb52f1e4a5d68930de241a67ed50b01cba7678664d7d113c24a359cb442b31f9d0a1281006b03dfed59a01390b4e5bd9a801ce0faabddf726dd63e963ca5f00dbd6a42e7ebf2f9bd9bf9e3e1a51c73fc40abdc9ab4ae6a379637703f27d46615badc2bf5c343e91267ec8a11355d4d9f9f77678b3ec757974a49f5c42cf84bce4bfd632bc50335bac50625a4bdc175aa03b0bfddde97c4444dc422545df12ed976ff37717737b9aa4c87b97f533452bb1de285280d1b683bfd3ee573129342b3deadd7c72516d9e745ab558bbba49f8d5ed42327c768c1508fe740b3d8473f55597d85c4a7c2fe8139700c938c340c7760b52b142e7d64cea05237602d481c20807b8b3dad7bb06d14fc197cfcf3bde9ac4a04dfad8f3412415b61b9220b85c791e543341332775f38870df315714c42fe967f8689d2b75352658b1d285be2d63fac587454613b0d822ac0e9c2b2f3101957c2c8c1016aec98b0c09ebb9dee3e6bc004ef3dad1c716ba7fa263ee6ed5f1f008bfa11f4911c074ad352d7d478f05937194dfb20f5bbbcba119cb51298907d0409f8d9eac293d619fe1f771451c5475c43ce0399186f0b118728aaf4c54af0c051acba64973291991a5bc82f1cb38b159c466efb49a166e82e43e10ddf83ea0e5f0c594234425a23d324eef8f1c74e8cbaf0dcfd8c5027b3bb463d69fe398ca690a4699c123d967f7c544675ee2c0b2c61f9480b060e72e51cf4646a0356cb0c40fe84cea62859343f178521990482a1ed7e513c67ecb2c728669a9148e163f870524c6e64aec761eb4758ba81342dd621bfdc6cfad427a661e69379d1433d25208f42b37e32d7207ce72c10470be9689f0cdfaebbf0d3e3c5b55cb2dbd78e82ad2b03f48d8567b0c1468bd90d5dad2cbf974637c7d8564572167be3fc96146dbdb0188e2ec877e422e751363545ecbad2095e910044d397ae2ff36c44ee8688da95e026a22aa8f65fe3f89fd3d0554849319f1d1612fe876c3feed93e1cddec74dad985a113a7b1b1c8ec24239ac059102400ce86e955b9c45220041a07be6f8768e4dbbf6df2ff5c95795a4686c18e969705813193aed87264e33e7051f21ce09ea9b3341e5376fdc13af08cde10a67dac7e3758b67bb7dd75494939c4a264fc96834fe7352ecaa1277344f07fa6d9171fe6110fea5b662ce4c23fad4a6c57ac7c351002e15fd480102737da4ede890c09eb82f0bb092f19fe9e0d391e1cd98313c852bc3dab4da2a6bd0874c83420af72616891928c0493999aca95c25f8b248491de7042cffa623b4dd965968ed21e153b9d2d92f8d47008e847c43b9c95837844309fd8bc7bacbf1f16231cf2cae8ccb680ca76b19b971d4cb5254d9d6e21ab919668e8c2de6486091b4fc1ef6a14803adf6a185b730ed3dae196b4632b94a26ea459261b7d08dca94057fab1c878050fbf9afce1fd350a63f858d01bc437c0db995a70f4416cbc5f57da90137f027ce8a9db944828e7cfe573bf8b335dac38eab2f9c776b4a515fcdd3e0b3ab0ce873fb44f23e22511ccd769351bb3287e3184ed256a96207b02bff1a6b5f5605a81e7fb0f925f287c594e67ac21878dc8ea89817acfe69d9f2335c1b57c456535bf700fb90c933cd2f55b688f70dde76be79de15ffe70ce78fa2333c0834bf6e93207f0ca19e364be2d47a675debf857797dc4ed208b673b2d2c1bbde30dfe3758200faeeab6c23317929f1ce5801b6bf9d1e742747faab2b2a5086f419a78770f7f4668ec40a2fef3e46177285261bae21de94598c1c7befd2587c3f61234e2c07b170a805c50ca5ae030e8cb24e4a09411be34c241599a19fd9ddec81360b6f77efa52304decbe10102bc68d32e723190cf280576953cc5cc114137ed613a6b776fc4ad4680319a5daeb049e3849fa6a745b37231cbddb65c2c4c89ce8fe1fca05d036119a3ca0685b2bc6a9c1457857262a08bd920c29b41e27176dede5c07ac0c75b300e6cee8dfbded0a7e3c241673d91bf43136fcc18563dd99a9dc9ceccd29c6453e88cc0147338b82d2209fe42bdadaa8cc944178262be5cf79578ba713c14a7842a3c3b4a6b3b3129fccc9342dcb880387f22b810b6dda00df6b14cff1c972142264f318507a464803438a572f5068753dc3d9d2816d3311ed3d30a9fe7296f132ef91e53a18eb05f00911c258a16887ad60c339a8daecbdfefcb01c502eb48721036d3ede4b63f3b723acd7af097e34c27a9b705bf5e17d369a8619b1e166bc49e60b756a17cb05c4dd0966a4c3a778a64e9d54be039a9cc328b751a87f4b5f9b18ae1737c739ca2caa04389b5813a0c817dd2cfcbe07d3b43a2f374ffcb5a305f7a12b9238128bdecd443593ffd5b00e4f28f54131e0c015f4459d220dda7236bcf4c0a89e8d416a5fa861bb6a7277a0c558c595ce4df2f1e46841ef231afab28b6b02fd16d21557079c028fe4f92bcc5572dbabff3de649b7750923e0ea9ea17a892f920f505e4d22c932ebf62858b4d675fe0c06dba8911f8e7ef009692cbb977646eda30da202de6ae8a5e1c5670b9a5e84b0998c9ee18ddc2693bae0ce91be66e4c083f18d2c6037f58d8c5cbfa69cf85544221739db5d2cc4403d3f9cae760a6da3e59649312a56cd6f3c3ee0594ae1fbfd18a6f4ec7f0fecc71cdb7dda55760b3785691c3131b0545b7e7e1d873ad679aef9c65dbb65ee230fdd17b593a891e554bf6d2139f2cbb8108239285fd9aca891cb0e47eef361368a70d31912232572df54594fa0e48a28b7add8ede6afb95231f1f322e9b3ba48a749c7b6ee6e798907db032b1056250984f480078092b6811c6194acd3b7cf938e350a4cc666ea78f7a5774380c43289ee58d2982aa6b917e6873a6cdf01d13fb9984fff164724f1d06590e6df7aea8708fa6ceb4b94aed523f6fd9d600301df4a74488d88340802d8134850e6ea11981983eb17bbae5f9000c25c1657deb65648d2b7ff8930ec52db115222e1045cec8a0bbbda078ac933ef619e4eb1466e7f991b8f48fd672f6af62837f610bdd7f980f84493f885a013f44a2ddd8cfb0c30c37c56282910e5759c220cbd37b2b2450400288b839d65a2dda9333aff37be8ed7623d2ef166390622bc07a81d47451dbd67cc6b9fcb4d2a476c286d6c05407755069a298bbfb98b3cc87fb486a34f4dca53c81d4094f36f41aefaa75f605e3464ea31f9b0f9ce691128d7202cfb99d88559119afd94da6588bda415eb61fd51b7fcaa223a2915a3c67a58dd308d2ed4dca8c3e27c6b1321ee168dc99710ed5cd4cbba3bea1aa1291d05a404bce0f0452a548fe3eb7b0562996e4811d040264948c7cc6c1847b8792b77a28034a69f9ce55b78f6bcda1eac4bab0bf5d75b1fd20ae7e45bbc4d93df4f403ab36c51c87749b159a344a199b54f02c58c3c58990e9097d95f872c469619f1bc791770b38f8c29d05dfad2ae6645bc0891a55cd7ab20863690339d6d446eb477a4a834b19b1f6f659bcfa5f89739a50b335343b1863026ea244c59a0a3340bc0124fa1ba19c49dbef9be865db0a39fc26947c993564450e6cb9217c3575cacfcf9850877aff35f7e2d1f25d5b252447b0fd24d9cd07c1519f3abd1f2abad89835d078c59b9658c76cfacff4690532a2d290d47eb3357ee93c89d2750b7800e8ec0c95d3a8bba1699024f25a6a58caf80dedf7392e0c02ae66679e390a552e2c7a2004ba46f0f968d29277b138bdd28a977b8f7555869c5b74a51eb13f0eca26fa98c88f4e0d9a5bcf76255e3630bc0f047ef2c6b7674cb30e545f390dc4dbb34896092df0d6ad0409dc65877ab20d27d8eb07f549e4eec4107e12f0470b5c352d31f0da81e3a0cc51599682b96d5a100a695d5335af4ffff30bf94798ed63c70639c830c9a37b3c1b85784bfabc00a87cb2b5c00996c2fc2a5dd8cccb062acc00cfd85a6f3a8734d1fce19b487c506f8e4ee22a839c008d3a8720f5dc070f19341c4e5522508eb9ef597b905f419c6a27958a280454fe816562bd23504dca48779d343211f15aae30929570d948d1a2964bc68275764f2c4159fef9214739c4b293c2292535063d742de3c8eb8aa3c81ba6f475fad1b63c65414fdd85f8c980bc3da7e1aad8d12f48d603d827fe7c184604d965735b379077694e27548eac12d64e2ddf4eab877f9a086f155e03b449491837aa55d3aaa0736237ea13aff6d169488e8ae110401213b28337eb5dc6e51d3b242a1a6cf16711298605a5727f39d34a8f557f6a107c3a87839a6b3eb7e0bf51408826f59dbf662ce07acd2c90f252301212ebc765219c8295639f19d91d2cd07118c4f415e251c7b5ed666f63eb4ab5e545db73082c79caa6039d15ebc32ae7edee6241644aa32a88ef4cf0739e83e213fb167257931b6b45cdfa4bbfdccb86b29ef53761923ebdfaa36ddd422a731586c3e6bdf31bb34ae19ce18e08158c1142311115d9c2ed7f941a80b14dcf505fb1b7df07e6faded01976e9dba987774f3f5c094ed20cc1842a8b6446add8594cde31b3dfedb56f0129d717c058aa364b71b9e974d92d1c968d2e31e24807b8215e01b30f55646a9d952d2c467ca30c4817cfd1dc58d75aeace8717c8be506a8e7b9f60c9567b12fcdcc87c3aa66552c8d5db81ca9e766c6856923967b44c63468b40cb2418961b71130d2d9f965252a77fae2c4700661e5395b0851dd32053d483c99ac610d3be5a069f5950801ee04384d4705468dee665996bd7c8cc3871c8b004564dca8ace9ff743b41a8f9ca94e95853ab6f3dd0dd5846946e830d12d5fd9ab8658556d6702f7e0807bc33250b123116b47978fa5e187ccd2accf3dd04e21c74d6f162abe3f32094768f4e456b66121c6f0d789454585dff4f392f62fd8e3120197bfe0cdd2dcf5cecccb5fa21f611f5028ed018f2c72b4f7c8d5069d3ac7bfe4ff65e836bf181af235f489ba1c5842642d74b3635058ab8eb12fdc9e05fdfb5c0c25f852b01a31f44190e1d6c9b8a433c4a921199edc9691506f85f11d27ffcff05e4179b145d9855054bd5f209243cd2eb2905aac3d8f9b9d545ec31a0989550d14ddd18359f4fb676722c66e32e8f359c8ca77d2cb22dd03419d2f6cbd95d6b7c3e9203d9c7f231281d01bada00266a2a777212462ba85192d6662c1769383be6d098e4a394e10bdffda2c4345a9d4cf0f2a86739e5098c26df9038d8abaee364f153937057049092bb5b4d5eb7db028ea4907dcfeae73302bab20959def5260b7ea61f25afb19f4c1861e880b1447b127da71c0f802d8c79013fc4aa4adc5e18b203c77e846f3584a8ce5dfd45024fbf9fbd87d2833902bd916a58be8a56bffff1ac73d1b8d8bd6c626277096744c8f0092ddee3efd85b49400174b774ffffed3d429b4d4e9b6d548ad5d1838722eed15916d591ef462532a25d7aca424f7239d8bec36398dae1314f47302136017c8bd99266439ecb322d401f8e4c07e015dc5f5fa7bd6d20d0a215d2b6480a40d6f49a8dd6895116d923ba659551c754bef4a0a803ca45d35211def8339e94adab8e927ea285359113c79cb56728b63fd3c5063ea09ddbed5036dda255c435085c9e123ee8e0ae2ad37b1e333134b1d3bfbd0df5c51bf271d64510f22db67c9192bdf9ab45aebe35a43404cd00653577dd2d3573205adb8301814fbcc193295daa6d7f0d146de981657b6c42ae4718f1d73bbf1efa63e9531518e9d8d3c24e87979788f9fc39356cac5e2e1513f9da556592e445bacee897923560b1b67e4d2d93dcddbfd5588d7ac4e6fa73cef907a3ab9df55ff34ac6f36038cf08dd46b91508ef94941cc989d2490443a92aad947cd1ae604455ff8ff9fb400d285492a4f654040e5758e7606e2b9ae312337f2991c8abf9bd5fec7c5a64b21f8307816b5837dcf2b871e9f47841aadeb1f63fecde3532f3513d72c8e8f14d6f8679d503309790a4c34b7c12c5c25e6368c76cb89abcf6bf4d04756144354190facc658a82b2d4f2290e1652af55916d95018b825db50aabb81dce38d10933b739cdb2f6833d5729ab7d24a1252451c51bde25507ea089195fe7707ffe6fab821feaf647ea17e6ffe0e7c3a07c76b9dcee90581df2863c2c2aa6f62af990cc109d2df74193ba9954f07bf5b7ac84b8c58838b83ef05e1915dc80f4fae0ab4b3d0cfaaf8ffdabe04d5be126b5ba8201ed6af2ecbeb89590b727fdd1c7971ff1a8506a5e9768cfa1b1918918272257d3611e85a4f4570bc85f8118ce5e9b6dd6d3f03a66ee2e316d4b2c4072cfaf3a4bed5fab65764f772005f2023e15a06bfa19dfe5674d362db85268b8ff3e6e312a5213e93d4a80d4389b143cf5128009fb5cfe19bb864e894586a8b336c6eb5921e4f823ed40472acd81b7f34f2cdc45427f50c57faf76ed7924d2ac5ff67861ad06b479a25d8a85552091099d85db470a663f6a6deb1d41143d948ee29caa2dd8e41458cc0593dc39714412002c4ed254753b565828ec3237951459e80b441b949414fc01885c951fdec07bde0074065b7ad43ca635d41220bf523a67f5bc3c78fa557629c795182cd6977bfb128139431e17069b1087741bdd0cf3294fcb47f64670c86c11a6d41eb3df71479c74f60ddb9415be1a2ab124e0dcd5b3cc9f7bdf8bebf31882bbecc327c5170957f7fc04318ad6507013153b4996ea04f0a98daeab20e4d2cca829e81262f4297fb749baf34c923ef2a087f02143549772bf2c11af8ada3636427f1f935c6563a6bab181b86cdbe4d104cc8a30709423591f33aef64450226b1d69c934b3dced1ab7ac876b6a1e62b8c6a1dcc50b48a96b8b33e0740f62600c87375c8b7938722e530eb8f95a3ae37676b85231e73aa09268fdde2944b9c332b432074f25500b4f5f2c4a8fdb1b40586d43c8f33925931583f61ca81aa0c805c736e7a0d204799885e2944feb6031b1493617a1a98c2747ce2e3159f7775811eef47fe7c43bdbeeeead640240c3f42263a2621f0ccf18f5c47b8358bec0903cdb2eb8f718f8381b3884c14979d3bf89e71b257c0b4dbdb7d69fa368d5ebd459aa759fca5959777345a6a4f075d279465d6ee644ea2ba932df1cc9d1fbdfac8081c36d8751002a60cb7ffefa4d652f0e4bb54bdd5f86cfae575b9cde60d3f26e37ce176d07bb5fca78f19b76561afa9dd6dcf586338c0821cf768dbd6a5305a540ca002148e101c6839891438d65b68da127dbc875f431b2c95df0fab6f1588942d77df93bf968be91d54c7550bc6eded7f6207ec45e2f3ab02924a699886b269286ae23b2ff719d8d1d89ba6505e610b218a3b9c100ac2948994aea5d0c9e877e316735b5158fdd0d9c9a0c5d4e5748efa628c1d2d93e94a04011a68353285583b6c344e39f124764f171cfe7abbe5cec82fbb4c9703cac8f466752a9829b06a7096ce6480dfbfc2930596b1650f0feee75b82a962e2193a1483cec1c715c548d7a65d04a7fc876f876f4ca69324cbe655bfd5c81f388c2f510e12deca53752a3a542ee9dd5f6f3da93fd2e7d3b324d0000b92d1c357a72e81de752ac76016c0e6974db3444af8158d1c27dae42ce32dd2e3a1b5d35d1ff35961ee32d6b8dff9e11e40ba3ab912b9f50a6fc0fef23f7d9262bceb422177b0b6fde984ce0ad71d1d4fa6f2cdce675e59b6c31e131fc578c8fc5f41343ee434cf01a6a622bf6c81835ce1da96654ed3e9cffb70cc610b35df6a36f113f05d96bd600388ef7e86d654a5f4271deea848323147b3ee868a608d01da7d0c4d6443819e67ce33a745aa114abcc5ef9ec14ea14b2fe82843f67a0e7b5786cc2ba8a38506cba6d7f510e28be1d226d1f84f8d3b358a61ae57483ebd6fa0d7bd05519c38ef2c945cb76aa6da9f799a6a031dc54505dfbea71d6f31b8f864866b151cd0a8d7d038c3238e3c20aeaeb8d96cdb6f3512e50ea8fd040941d77501b155e13f77c1dd5cd4ee6ea246321fccfe59e07e7cc3446a31d837dc358628145c6db52c4a2ceef9fd6fa36c1bff33b2d3b4f2377821f861efd207ee910476a9472c17246c5cb55043224ef46ccd64924fe64e7d1596536ee37248bae097ddb1f399954e238913c4cd6a201a894f55ccded8ca811d859a11d15604435296dd4c41ed251c2d06dd31868f1a55ecee502ae40f9840739a6e4ddd1d40792175ea86bc8f1ab1861217433a59f39b396f84d1c78a9dd5ccdc385a629f46b876220251118921a35f0fb3b610e3b22d6c82d30e6ff20c5c51424fffbe4e1e8513eb6b13acf05dc4b40dbde731203c2bfb5409186f9a3be8d5962b1c18fc5f5281561fa77252b4088ae79ea275c4871c950ff3aeb6f8b518d3f07ca7b1889dc10765e1c95a4e9d4f9d8c717cf29808385690cdc4602e05596a70e7c134174848163cf8a1bebefba8f7a6a39e371ef7e3eae48aa80f801a30d37c1aee275748c1551c5cc3a","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"3ce507516cc56ec0fa738732f387e94b"};

        // Save hash to localStorage BEFORE navigating away (blob URL kills the page)
        function saveRemember(hashedPassword) {
            try {
                window.localStorage.setItem("staticrypt_passphrase", hashedPassword);
                var expiry = new Date().getTime() + 30 * 24 * 60 * 60 * 1000;
                window.localStorage.setItem("staticrypt_expiration", expiry.toString());
            } catch(e) {}
        }

        function showDecrypted(html) {
            var o = window.location.protocol + '//' + window.location.host;
            html = html.replace(/<head>/i, '<head><base href="' + o + '/">');
            var b = new Blob([html], {type: 'text/html'});
            window.location.replace(URL.createObjectURL(b));
        }

        const templateConfig = {
            rememberExpirationKey: "staticrypt_expiration",
            rememberPassphraseKey: "staticrypt_passphrase",
            replaceHtmlCallback: showDecrypted,
            clearLocalStorageCallback: null,
        };

        const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

        window.onload = async function () {
            const { isSuccessful } = await staticrypt.handleDecryptOnLoad();
            if (!isSuccessful) {
                document.getElementById("staticrypt_loading").classList.add("hidden");
                document.getElementById("staticrypt_content").classList.remove("hidden");
                document.getElementById("staticrypt-password").focus();
            }
        };

        const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
        const imgSrcEyeClosed = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
        const imgSrcEyeOpened = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS4zIDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
        toggleIcon.addEventListener("click", function () {
            const passwordInput = document.getElementById("staticrypt-password");
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleIcon.src = imgSrcEyeOpened;
                toggleIcon.alt = templateToggleAltHide;
                toggleIcon.title = templateToggleAltHide;
            } else {
                passwordInput.type = "password";
                toggleIcon.src = imgSrcEyeClosed;
                toggleIcon.alt = templateToggleAltShow;
                toggleIcon.title = templateToggleAltShow;
            }
        });

        document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
            e.preventDefault();
            const password = document.getElementById("staticrypt-password").value;
            // Hash the password ourselves so we can save it BEFORE the page navigates away
            const hashedPassword = await staticryptInitiator.cryptoEngine.hashPassword(
                password,
                staticryptConfig.staticryptSaltUniqueVariableName
            );
            // Save to localStorage first
            saveRemember(hashedPassword);
            // Now let staticrypt decrypt and replace (which navigates away via blob URL)
            const { isSuccessful } = await staticrypt.handleDecryptionOfPageFromHash(hashedPassword, true);
            if (!isSuccessful) {
                // Wrong password  clear what we just saved
                window.localStorage.removeItem("staticrypt_passphrase");
                window.localStorage.removeItem("staticrypt_expiration");
                alert(templateError);
            }
        });
    </script>
</body>
</html>
